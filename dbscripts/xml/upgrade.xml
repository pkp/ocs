<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE install SYSTEM "dtd/install.dtd">

<!--
  * upgrade.xml
  *
  * Copyright (c) 2000-2007 John Willinsky
  * Distributed under the GNU GPL v2. For full terms see the file docs/COPYING.
  *
  * Upgrade descriptor file.
  *
  * $Id$
  -->

<install version="2.1.0.0">
	<!-- #2961: Stage 1 of 2.1 schema upgrade: Do not drop columns yet -->
	<upgrade minversion="2.0.0.0" maxversion="2.0.0.1">
		<data file="upgrade/2.1.0_preupdate.xml" />
		<schema file="ocs_schema_stage1.xml" />
		<code function="dropAllIndexes" />
	</upgrade>

	<!-- Upgrade to version 2.1.0 -->
	<upgrade minversion="2.0.0.0" maxversion="2.0.0.1">
		<data file="upgrade/2.1.0_localize.xml" />
		<code function="setConferencePrimaryLocales" />
		<code function="localizeConferenceSettings" />
		<code function="localizeSchedConfSettings" />
		<code function="installBlockPlugins" />
		<code function="setGalleyLocales" />
		<data file="upgrade/2.1.0_update.xml" />
		<code function="ensureSupportedLocales" />
		<code function="clearDataCache" />
		<note file="release-notes/README-2.1.0" />
	</upgrade>

	<!-- Common upgrade files -->
	<schema file="ocs_schema.xml"/>

	<upgrade minversion="2.0.0.0" maxversion="2.0.0.1">
		<code function="setReviewMode" />
	</upgrade>
</install>
