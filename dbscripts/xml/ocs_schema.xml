<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE schema SYSTEM "dtd/xmlschema.dtd">

<!--
  * ocs_schema.xml
  *
  * Copyright (c) 2000-2009 John Willinsky
  * Distributed under the GNU GPL v2. For full terms see the file docs/COPYING.
  *
  * OCS database schema in XML.
  *
  * $Id$
  -->

<schema version="0.2">

	<!--
	  *
	  * TABLE review_forms
	  *
	  -->
	<table name="review_forms">
		<field name="review_form_id" type="I8">
			<KEY/>
			<AUTOINCREMENT/>
		</field>
		<field name="conference_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="seq" type="F" />
		<field name="is_active" type="I1" />
		<descr>Review forms.</descr>
	</table>
	
	<!--
	  *
	  * TABLE review_form_settings
	  *
	  -->
	<table name="review_form_settings">
		<field name="review_form_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Review form settings</descr>
		<index name="review_form_settings_review_form_id">
			<col>review_form_id</col>
		</index>
		<index name="review_form_settings_pkey">
			<col>review_form_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE review_form_elements
	  *
	  -->
	<table name="review_form_elements">
		<field name="review_form_element_id" type="I8">
			<KEY/>
			<AUTOINCREMENT/>
		</field>
		<field name="review_form_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="seq" type="F" />
		<field name="element_type" type="I8" />
		<field name="required" type="I1" />
		<descr>Review form elements.</descr>
	</table>
	
	<!--
	  *
	  * TABLE review_form_element_settings
	  *
	  -->
	<table name="review_form_element_settings">
		<field name="review_form_element_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Review form element settings</descr>
		<index name="review_form_element_settings_review_form_element_id">
			<col>review_form_element_id</col>
		</index>
		<index name="review_form_element_settings_pkey">
			<col>review_form_element_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE review_form_responses
	  *
	  -->
	<table name="review_form_responses">
		<field name="review_form_element_id" type="I8">
			<NOTNULL />
		</field>
		<field name="review_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="response_type" type="C2" size="6"/>
		<field name="response_value" type="X" />
		<descr>Review form responses.</descr>
		<index name="review_form_responses_pkey">
			<col>review_form_element_id</col>
			<col>review_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE version
	  *
	  -->
	<table name="versions">
		<field name="major" type="I4">
			<NOTNULL />
			<DEFAULT VALUE="0"/>
		</field>
		<field name="minor" type="I4">
			<NOTNULL />
			<DEFAULT VALUE="0"/>
		</field>
		<field name="revision" type="I4">
			<NOTNULL />
			<DEFAULT VALUE="0"/>
		</field>
		<field name="build" type="I4">
			<NOTNULL />
			<DEFAULT VALUE="0"/>
		</field>
		<field name="date_installed" type="T">
			<NOTNULL/>
		</field>
		<field name="current" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<descr>OCS installation and upgrade version history.</descr>
		<index name="versions_pkey">
			<col>major</col>
			<col>minor</col>
			<col>revision</col>
			<col>build</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE site
	  *
	  -->
	<table name="site">
		<field name="conference_redirect" type="I8">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
			<descr>If not 0, redirect to the specified conference site.</descr>
		</field>
		<field name="primary_locale" type="C2" size="5">
			<NOTNULL/>
			<descr>Primary locale for the site.</descr>
		</field>
		<field name="min_password_length" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="6"/>
		</field>
		<field name="installed_locales" type="C2" size="255">
			<NOTNULL/>
			<DEFAULT VALUE="en_US"/>
			<descr>Locales for which support has been installed.</descr>
		</field>
		<field name="supported_locales" type="C2" size="255">
			<descr>Locales supported by the site (for hosted conferences).</descr>
		</field>
		<field name="original_style_file_name" type="C2" size="255"/>
		<descr>Common site settings.</descr>
	</table>

	<!--
	  *
	  * TABLE site_settings
	  *
	  -->
	<table name="site_settings">
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL />
			<descr>(bool|int|float|string|object)</descr>
		</field>
		<descr>Site settings.</descr>
		<index name="site_settings_pkey">
			<col>setting_name</col>
			<col>locale</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE scheduled_tasks
	  *
	  -->
	<table name="scheduled_tasks">
		<field name="class_name" type="C2" size="255">
			<NOTNULL/>
		</field>
		<field name="last_run" type="T" />
		<descr>The last run times of all scheduled tasks.</descr>
		<index name="scheduled_tasks_pkey">
			<col>class_name</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE users
	  *
	  -->
	<table name="users">
		<field name="user_id" type="I8">
			<KEY />
			<AUTOINCREMENT />
		</field>
		<field name="username" type="C2" size="32">
			<NOTNULL/>
		</field>
		<field name="password" type="C2" size="40">
			<NOTNULL/>
		</field>
		<field name="salutation" type="C2" size="40"/>
		<field name="first_name" type="C2" size="40">
			<NOTNULL/>
		</field>
		<field name="middle_name" type="C2" size="40"/>
		<field name="last_name" type="C2" size="90">
			<NOTNULL/>
		</field>
		<field name="gender" type="C" size="1"/>
		<field name="initials" type="C2" size="5"/>
		<field name="affiliation" type="C2" size="255"/>
		<field name="email" type="C2" size="90">
			<NOTNULL/>
		</field>
		<field name="url" type="C2" size="255"/>
		<field name="phone" type="C2" size="24"/>
		<field name="fax" type="C2" size="24"/>
		<field name="mailing_address" type="C2" size="255"/>
		<field name="country" type="C2" size="90"/>
		<field name="time_zone" type="C2" size="20"/>
		<field name="locales" type="C2" size="255"/>
		<field name="date_last_email" type="T"/>
		<field name="date_registered" type="T">
			<NOTNULL/>
		</field>
		<field name="date_validated" type="T"/>
		<field name="date_last_login" type="T">
			<NOTNULL/>
		</field>
		<field name="must_change_password" type="I1"/>
		<field name="auth_id" type="I8"/>
		<field name="disabled" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="disabled_reason" type="X"/>
		<descr>User authentication credentials and profile data.</descr>
		<index name="users_username">
			<col>username</col>
			<UNIQUE />
		</index>
		<index name="users_email">
			<col>email</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE user_settings
	  *
	  -->
	<table name="user_settings">
		<field name="user_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL/>
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL/>
		</field>
		<field name="conference_id" type="I8">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Locale-specific user data</descr>
		<index name="user_settings_user_id">
			<col>user_id</col>
		</index>
		<index name="user_settings_pkey">
			<col>user_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<col>conference_id</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE auth_sources
	  *
	  -->
	<table name="auth_sources">
		<field name="auth_id" type="I8">
			<KEY />
			<AUTOINCREMENT />
		</field>
		<field name="title" type="C2" size="60">
			<NOTNULL/>
		</field>
		<field name="plugin" type="C2" size="32">
			<NOTNULL/>
		</field>
		<field name="auth_default" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="settings" type="X"/>
		<descr>User authentication sources.</descr>
	</table>

	<!--
	  *
	  * TABLE sessions
	  *
	  -->
	<table name="sessions">
		<field name="session_id" type="C2" size="32">
			<NOTNULL/>
		</field>
		<field name="user_id" type="I8"/>
		<field name="ip_address" type="C2" size="39">
			<NOTNULL/>
		</field>
		<field name="user_agent" type="C2" size="255"/>
		<field name="created" type="I8">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="last_used" type="I8">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="remember" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="data" type="X">
			<NOTNULL/>
			<DEFAULT VALUE=""/>
		</field>
		<descr>Browser/user sessions and session data.</descr>
		<index name="sessions_user_id">
			<col>user_id</col>
		</index>
		<index name="sessions_pkey">
			<col>session_id</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE conferences
	  *
	  -->
	<table name="conferences">
		<field name="conference_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="path" type="C2" size="32">
			<NOTNULL/>
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="primary_locale" type="C2" size="5">
			<NOTNULL/>
		</field>
		<field name="enabled" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="1"/>
		</field>
		<descr>Conferences and basic conference settings.</descr>
		<index name="conferences_path">
			<col>path</col>
			<UNIQUE />
		</index>
	</table>
	
	<!--
	  *
	  * TABLE conference_settings
	  *
	  -->
	<table name="conference_settings">
		<field name="conference_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL/>
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL/>
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
			<descr>(bool|int|float|string|object)</descr>
		</field>
		<descr>Conference settings.</descr>
		<index name="conference_settings_conference_id">
			<col>conference_id</col>
		</index>
		<index name="conference_settings_pkey">
			<col>conference_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE />
		</index>
	</table>
	
	<!--
	  *
	  * TABLE sched_confs
	  *
	  -->
	<table name="sched_confs">
		<field name="sched_conf_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="conference_id" type="I8"/>
		<field name="path" type="C2" size="32">
			<NOTNULL/>
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="start_date" type="T"/>
		<field name="end_date" type="T"/>
		<descr>Scheduled conferences and basic scheduled conference settings.</descr>
		<index name="sched_conf_path">
			<col>path</col>
		</index>
		<index name="sched_conf_conference_id">
			<col>conference_id</col>
		</index>
		<index name="sched_confs_start_end_date">
			<col>start_date</col>
			<col>end_date</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE sched_conf_settings
	  *
	  -->
	<table name="sched_conf_settings">
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL/>
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL/>
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
			<descr>(bool|int|float|string|object)</descr>
		</field>
		<descr>Scheduled conference settings.</descr>
		<index name="sched_conf_settings_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
		<index name="sched_conf_settings_pkey">
			<col>sched_conf_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE />
		</index>
	</table>
	
	<!--
	  *
	  * TABLE conference_event_log
	  *
	  -->
	<table name="conference_event_log">
		<field name="log_id" type="I8">
			<KEY/>
			<AUTOINCREMENT/>
		</field>
		<field name="sched_conf_id" type="I8"/>
		<field name="conference_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="user_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="date_logged" type="T">
			<NOTNULL/>
		</field>
		<field name="ip_address" type="C2" size="15">
			<NOTNULL/>
		</field>
		<field name="log_level" type="C2" size="1"/>
		<field name="event_type" type="I8"/>
		<field name="assoc_type" type="I8"/>
		<field name="assoc_id" type="I8"/>
		<field name="is_translated" type="I1"/>
		<field name="entry_params" type="X"/>
		<field name="message" type="X"/>
		<descr>A log of all events associated with a conference or scheduled conference.</descr>
		<index name="conference_event_log_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
		<index name="conference_event_log_conference_id">
			<col>conference_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE plugin_settings
	  *
	  -->
	<table name="plugin_settings">
		<field name="plugin_name" type="C2" size="80">
			<NOTNULL/>
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL/>
			<DEFAULT VALUE=""/>
		</field>
		<field name="conference_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="setting_name" type="C2" size="80">
			<NOTNULL/>
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
			<descr>(bool|int|float|string|object)</descr>
		</field>
		<descr>Plugin settings.</descr>
		<index name="plugin_settings_plugin_name">
			<col>plugin_name</col>
		</index>
		<index name="plugin_settings_pkey">
			<col>plugin_name</col>
			<col>locale</col>
			<col>sched_conf_id</col>
			<col>conference_id</col>
			<col>setting_name</col>
			<UNIQUE />
		</index>
	</table>
	
	<!--
	  *
	  * TABLE roles
	  *
	  -->
	<table name="roles">
		<field name="conference_id" type="I8">
			<NOTNULL />
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL />
		</field>
		<field name="user_id" type="I8">
			<NOTNULL />
		</field>
		<field name="role_id" type="I8">
			<NOTNULL />
		</field>
		<descr>User roles in conferences.</descr>
		<index name="roles_conference_id">
			<col>conference_id</col>
		</index>
		<index name="roles_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
		<index name="roles_user_id">
			<col>user_id</col>
		</index>
		<index name="roles_role_id">
			<col>role_id</col>
		</index>
		<index name="roles_pkey">
			<col>conference_id</col>
			<col>sched_conf_id</col>
			<col>user_id</col>
			<col>role_id</col>
			<UNIQUE />
		</index>
	</table>

	<table name="notification_status">
		<field name="sched_conf_id" type="I8">
			<NOTNULL />
		</field>
		<field name="user_id" type="I8">
			<NOTNULL />
		</field>
		<descr>User "mail notifications to my account" flags</descr>
		<index name="notification_status_pkey">
			<col>sched_conf_id</col>
			<col>user_id</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE tracks
	  *
	  -->
	<table name="tracks">
		<field name="track_id" type="I8">
			<KEY />
			<AUTOINCREMENT />
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="review_form_id" type="I8" />
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="director_restricted" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="meta_reviewed" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="1"/>
		</field>
		<field name="hide_about" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="disable_comments" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<descr>Scheduled conference tracks.</descr>
		<index name="tracks_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE track_settings
	  *
	  -->
	<table name="track_settings">
		<field name="track_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
			<descr>(bool|int|float|string|object)</descr>
		</field>
		<descr>Track settings.</descr>
		<index name="track_settings_track_id">
			<col>track_id</col>
		</index>
		<index name="track_settings_pkey">
			<col>track_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE track_directors
	  *
	  -->
	<table name="track_directors">
		<field name="sched_conf_id" type="I8">
			<NOTNULL />
		</field>
		<field name="track_id" type="I8">
			<NOTNULL />
		</field>
		<field name="user_id" type="I8">
			<NOTNULL />
		</field>
		<descr>Assignments of track directors to tracks.</descr>
		<index name="track_directors_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
		<index name="track_directors_track_id">
			<col>track_id</col>
		</index>
		<index name="track_directors_user_id">
			<col>user_id</col>
		</index>
		<index name="track_directors_pkey">
			<col>sched_conf_id</col>
			<col>track_id</col>
			<col>user_id</col>
			<UNIQUE />
		</index>
	</table>

	<table name="custom_track_orders">
		<field name="sched_conf_id" type="I8">
			<NOTNULL />
		</field>
		<field name="track_id" type="I8">
			<NOTNULL />
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<descr>Custom sequencing information by scheduled conference, when available.</descr>
		<index name="custom_track_orders_pkey">
			<col>sched_conf_id</col>
			<col>track_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE papers
	  *
	  -->
	<table name="papers">
		<field name="paper_id" type="I8">
			<KEY />
			<AUTOINCREMENT />
		</field>
		<field name="user_id" type="I8">
			<NOTNULL />
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL />
		</field>
		<field name="track_id" type="I8"/>
		<field name="language" type="C2" size="10">
			<DEFAULT VALUE="en"/>
		</field>
		<field name="paper_type" type="I8"/>
		<field name="start_time" type="T"/>
		<field name="end_time" type="T"/>
		<field name="comments_to_dr" type="X"/>
		<field name="date_submitted" type="T"/>
		<field name="date_reminded" type="T"/>
		<field name="last_modified" type="T"/>
		<field name="date_status_modified" type="T"/>
		<field name="status" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="1"/>
		</field>
		<field name="submission_progress" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="1"/>
		</field>
		<field name="review_mode" type="I8"/>
		<field name="current_stage" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="1"/>
		</field>
		<field name="submission_file_id" type="I8"/>
		<field name="revised_file_id" type="I8"/>
		<field name="review_file_id" type="I8"/>
		<field name="layout_file_id" type="I8"/>
		<field name="director_file_id" type="I8"/>
		<field name="pages" type="C2" size="255"/>
		<field name="date_to_presentations" type="T"/>
		<field name="date_to_archive" type="T"/>
		<field name="comments_status" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<descr>Conference papers.</descr>
		<index name="papers_user_id">
			<col>user_id</col>
		</index>
		<index name="papers_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
		<index name="papers_track_id">
			<col>track_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE paper_settings
	  *
	  -->
	<table name="paper_settings">
		<field name="paper_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
			<descr>(bool|int|float|string|object)</descr>
		</field>
		<descr>Track settings.</descr>
		<index name="paper_settings_paper_id">
			<col>paper_id</col>
		</index>
		<index name="paper_settings_pkey">
			<col>paper_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE/>
		</index>
	</table>

	<!--
	  *
	  * TABLE published_papers
	  *
	  -->
	<table name="published_papers">
		<field name="pub_id" type="I8">
			<KEY/>
			<AUTOINCREMENT/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="room_id" type="I8" />
		<field name="date_published" type="T">
			<NOTNULL/>
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="views" type="I4">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="public_paper_id" type="C2" size="255"/>
		<descr>Conference papers.</descr>
		<index name="published_papers_paper_id">
			<col>paper_id</col>
			<UNIQUE/>
		</index>
		<index name="published_papers_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
		<index name="published_papers_public_paper_id">
			<col>public_paper_id</col>
		</index>
	</table>

	<!--
	 *
	 * TABLE comments
	 *
	 -->
	<table name="comments">
		<field name="comment_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="parent_comment_id" type="I8"/>
		<field name="num_children" type="I4">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="user_id" type="I8"/>
		<field name="poster_ip" type="C2" size="15">
			<NOTNULL/>
		</field>
		<field name="poster_name" type="C2" size="90"/>
		<field name="poster_email" type="C2" size="90"/>
		<field name="title" type="C2" size="255">
			<NOTNULL/>
		</field>
		<field name="body" type="X"/>
		<field name="date_posted" type="T"/>
		<field name="date_modified" type="T"/>
		<descr>Reader comments on papers.</descr>
		<index name="comments_paper_id">
			<col>paper_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE paper_presenters
	  *
	  -->
	<table name="paper_presenters">
		<field name="presenter_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="primary_contact" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="first_name" type="C2" size="40">
			<NOTNULL/>
		</field>
		<field name="middle_name" type="C2" size="40"/>
		<field name="last_name" type="C2" size="90">
			<NOTNULL/>
		</field>
		<field name="affiliation" type="C2" size="255"/>
		<field name="country" type="C2" size="90"/>
		<field name="email" type="C2" size="90">
			<NOTNULL/>
		</field>
		<field name="url" type="C2" size="255"/>
		<descr>Presenter metadata for papers.</descr>
		<index name="paper_presenters_paper_id">
			<col>paper_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE paper_presenter_settings
	  *
	  -->
	<table name="paper_presenter_settings">
		<field name="presenter_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
			<descr>(bool|int|float|string|object)</descr>
		</field>
		<descr>Paper presenter settings.</descr>
		<index name="presenter_settings_presenter_id">
			<col>presenter_id</col>
		</index>
		<index name="paper_presenter_settings_pkey">
			<col>presenter_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE/>
		</index>
	</table>

	<!--
	  *
	  * TABLE paper_files
	  *
	  -->
	<table name="paper_files">
		<field name="file_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="revision" type="I8">
			<KEY />
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="file_name" type="C2" size="90">
			<NOTNULL/>
		</field>
		<field name="file_type" type="C2" size="255">
			<NOTNULL/>
		</field>
		<field name="file_size" type="I8">
			<NOTNULL/>
		</field>
		<field name="original_file_name" type="C2" size="127"/>
		<field name="type" type="C2" size="40">
			<NOTNULL/>
		</field>
		<field name="stage" type="I1"/>
		<field name="status" type="C2" size="40">
			<NOTNULL/>
		</field>
		<field name="viewable" type="I1" />
		<field name="date_uploaded" type="T">
			<NOTNULL/>
		</field>
		<field name="date_modified" type="T">
			<NOTNULL/>
		</field>
		<descr>Files associated with papers. Includes submission files, supplementary files, etc.</descr>
		<index name="paper_files_paper_id">
			<col>paper_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE paper_supplementary_files
	  *
	  -->
	<table name="paper_supplementary_files">
		<field name="supp_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="file_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="type" type="C2" size="255"/>
		<field name="language" type="C2" size="10"/>
		<field name="public_supp_file_id" type="C2" size="255"/>
		<field name="date_created" type="D"/>
		<field name="show_reviewers" type="I1">
			<DEFAULT VALUE="0"/>
		</field>
		<field name="date_submitted" type="T">
			<NOTNULL/>
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<descr>Supplementary files attached to papers.</descr>
		<index name="paper_supplementary_files_file_id">
			<col>file_id</col>
		</index>
		<index name="paper_supplementary_files_paper_id">
			<col>paper_id</col>
		</index>
		<index name="paper_supplementary_files_public_issue_id">
			<col>public_supp_file_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE paper_supplementary_file_settings
	  *
	  -->
	<table name="paper_supp_file_settings">
		<field name="supp_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
			<descr>(bool|int|float|string|object|date)</descr>
		</field>
		<descr>Paper supplementary file metadata.</descr>
		<index name="paper_supp_file_settings_supp_id">
			<col>supp_id</col>
		</index>
		<index name="paper_supp_file_settings_pkey">
			<col>supp_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE/>
		</index>
	</table>

	<!--
	  *
	  * TABLE paper_notes
	  *
	  -->
	<table name="paper_notes">
		<field name="note_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="user_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="date_created" type="T">
			<NOTNULL/>
		</field>
		<field name="date_modified" type="T">
			<NOTNULL/>
		</field>
		<field name="title" type="C2" size="255">
			<NOTNULL/>
		</field>
		<field name="note" type="X"/>
		<field name="file_id" type="I8">
			<NOTNULL/>
		</field>
		<descr>Paper submission notes added by directors to each submission</descr>
		<index name="paper_notes_paper_id">
			<col>paper_id</col>
		</index>
		<index name="paper_notes_user_id">
			<col>user_id</col>
		</index>
		<index name="paper_notes_file_id">
			<col>file_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE edit_assignments
	  *
	  -->
	<table name="edit_assignments">
		<field name="edit_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="director_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="date_assigned" type="T"/>
		<field name="date_notified" type="T"/>
		<field name="date_underway" type="T"/>
		<descr>Editing assignments.</descr>
		<index name="edit_assignments_paper_id">
			<col>paper_id</col>
		</index>
		<index name="edit_assignments_director_id">
			<col>director_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE edit_decisions
	  *
	  -->
	<table name="edit_decisions">
		<field name="edit_decision_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="stage" type="I1">
			<NOTNULL/>
		</field>
		<field name="director_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="decision" type="I1">
			<NOTNULL/>
		</field>
		<field name="date_decided" type="T">
			<NOTNULL/>
		</field>
		<descr>Director decisions.</descr>
		<index name="edit_decisions_paper_id">
			<col>paper_id</col>
		</index>
		<index name="edit_decisions_director_id">
			<col>director_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE review_stages
	  *
	  -->
	<table name="review_stages">
		<field name="paper_id" type="I8">
			<NOTNULL />
		</field>
		<field name="stage" type="I1">
			<NOTNULL />
		</field>
		<field name="review_revision" type="I8" />
		<descr>Review stages.</descr>
		<index name="review_stages_paper_id">
			<col>paper_id</col>
		</index>
		<index name="review_stages_pkey">
			<col>paper_id</col>
			<col>stage</col>
			<UNIQUE/>
		</index>
	</table>
		
	<!--
	  *
	  * TABLE review_assignments
	  *
	  -->
	<table name="review_assignments">
		<field name="review_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="reviewer_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="recommendation" type="I1"/>
		<field name="date_assigned" type="T"/>
		<field name="date_notified" type="T"/>
		<field name="date_confirmed" type="T"/>
		<field name="date_completed" type="T"/>
		<field name="date_acknowledged" type="T"/>
		<field name="date_due" type="T"/>
		<field name="last_modified" type="T"/>
		<field name="reminder_was_automatic" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="declined" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="replaced" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="cancelled" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="reviewer_file_id" type="I8"/>
		<field name="date_rated" type="T"/>
		<field name="date_reminded" type="T"/>
		<field name="quality" type="I1"/>
		<field name="stage" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="1"/>
		</field>
		<field name="review_form_id" type="I8"/>
		<descr>Reviewing assignments.</descr>
		<index name="review_assignments_paper_id">
			<col>paper_id</col>
		</index>
		<index name="review_assignments_reviewer_id">
			<col>reviewer_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE paper_galleys
	  *
	  -->
	<table name="paper_galleys">
		<field name="galley_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="locale" type="C2" size="5"/>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="file_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="label" type="C2" size="32"/>
		<field name="html_galley" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="style_file_id" type="I8"/>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="views" type="I4">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<descr>Paper galleys.</descr>
		<index name="paper_galleys_paper_id">
			<col>paper_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE paper_html_galley_images
	  *
	  -->
	<table name="paper_html_galley_images">
		<field name="galley_id" type="I8">
			<NOTNULL />
		</field>
		<field name="file_id" type="I8">
			<NOTNULL />
		</field>
		<descr>Images associated with a paper HTML galley.</descr>
		<index name="paper_html_galley_images_pkey">
			<col>galley_id</col>
			<col>file_id</col>
			<UNIQUE/>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE paper_event_log
	  *
	  -->
	<table name="paper_event_log">
		<field name="log_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="user_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="date_logged" type="T">
			<NOTNULL/>
		</field>
		<field name="ip_address" type="C2" size="15">
			<NOTNULL/>
		</field>
		<field name="log_level" type="C2" size="1"/>
		<field name="event_type" type="I8"/>
		<field name="assoc_type" type="I8"/>
		<field name="assoc_id" type="I8"/>
		<field name="is_translated" type="L"/>
		<field name="entry_params" type="X"/>
		<field name="message" type="X"/>
		<descr>A log of all events associated with a submission.</descr>
		<index name="paper_event_log_paper_id">
			<col>paper_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE paper_email_log
	  *
	  -->
	<table name="paper_email_log">
		<field name="log_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="sender_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="date_sent" type="T">
			<NOTNULL/>
		</field>
		<field name="ip_address" type="C2" size="15"/>
		<field name="event_type" type="I8"/>
		<field name="assoc_type" type="I8"/>
		<field name="assoc_id" type="I8"/>
		<field name="from_address" type="C2" size="255"/>
		<field name="recipients" type="X"/>
		<field name="cc_recipients" type="X"/>
		<field name="bcc_recipients" type="X"/>
		<field name="subject" type="C2" size="255"/>
		<field name="body" type="X"/>
		<descr>A log of all emails sent out related to a submission.</descr>
		<index name="paper_email_log_paper_id">
			<col>paper_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE paper_comments
	  *
	  -->
	<table name="paper_comments">
		<field name="comment_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="comment_type" type="I8"/>
		<field name="role_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="assoc_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="author_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="comment_title" type="C2" size="90">
			<NOTNULL/>
		</field>
		<field name="comments" type="X"/>
		<field name="date_posted" type="T"/>
		<field name="date_modified" type="T"/>
		<field name="viewable" type="I1" />
		<descr>Comments posted on papers.</descr>
		<index name="paper_comments_paper_id">
			<col>paper_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE email_templates_default
	  *
	  -->
	<table name="email_templates_default">
		<field name="email_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="email_key" type="C2" size="30">
			<NOTNULL/>
			<descr>Unique identifier for this email.</descr>
		</field>
		<field name="can_disable" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="1"/>
		</field>
		<field name="can_edit" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="1"/>
		</field>
		<field name="from_role_id" type="I8"/>
		<field name="to_role_id" type="I8"/>
		<descr>Default conference email templates.</descr>
		<index name="email_templates_default_email_key">
			<col>email_key</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE email_templates_default_data
	  *
	  -->
	<table name="email_templates_default_data">
		<field name="email_key" type="C2" size="30">
			<NOTNULL />
			<descr>Unique identifier for this email.</descr>
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE="en_US"/>
		</field>
		<field name="subject" type="C2" size="120">
			<NOTNULL/>
		</field>
		<field name="body" type="X"/>
		<field name="description" type="X"/>
		<descr>Default data for conference email templates.</descr>
		<index name="email_templates_default_data_pkey">
			<col>email_key</col>
			<col>locale</col>
			<UNIQUE />
		</index>
	</table>
	
	<!--
	  *
	  * TABLE email_templates
	  *
	  -->
	<table name="email_templates">
		<field name="email_id" type="I8">
			<KEY/>
			<AUTOINCREMENT/>
		</field>
		<field name="email_key" type="C2" size="30">
			<NOTNULL/>
			<descr>Unique identifier for this email.</descr>
		</field>
		<field name="conference_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="enabled" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="1"/>
		</field>
		<descr>Templates for conference emails.</descr>
		<index name="email_templates_email_key">
			<col>email_key</col>
			<col>conference_id</col>
			<col>sched_conf_id</col>
			<UNIQUE/>
		</index>
		<index name="email_templates_conference_id">
			<col>conference_id</col>
		</index>
		<index name="email_templates_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
	</table>
	
	<!--
	  *
	  * TABLE email_templates_data
	  *
	  -->
	<table name="email_templates_data">
		<field name="email_key" type="C2" size="30">
			<NOTNULL />
			<descr>Unique identifier for this email.</descr>
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE="en_US"/>
		</field>
		<field name="conference_id" type="I8">
			<NOTNULL />
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL />
		</field>
		<field name="subject" type="C2" size="120">
			<NOTNULL/>
		</field>
		<field name="body" type="X"/>
		<descr>Data for conference email templates.</descr>
		<index name="email_templates_data_pkey">
			<col>email_key</col>
			<col>locale</col>
			<col>conference_id</col>
			<col>sched_conf_id</col>
			<UNIQUE/>
		</index>
	</table>
	
	<!--
	 *
	 * TABLE paper_search_keyword_list
	 *
	 -->
	<table name="paper_search_keyword_list">
		<field name="keyword_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="keyword_text" type="C2" size="60">
			<NOTNULL/>
		</field>
		<descr>List of all keywords.</descr>
		<index name="paper_search_keyword_text">
			<col>keyword_text</col>
			<UNIQUE/>
		</index>
	</table>
	
	<!--
	 *
	 * TABLE paper_search_objects
	 *
	 -->
	<table name="paper_search_objects">
		<field name="object_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="paper_id" type="I8">
			<NOTNULL />
		</field>
		<field name="type" type="I4">
			<NOTNULL />
			<descr>Type of item. E.g., abstract, fulltext, etc.</descr>
		</field>
		<field name="assoc_id" type="I8">
			<descr>Optional ID of an associated record (e.g., a file_id)</descr>
		</field>
		<descr>Indexed objects.</descr>
	</table>
	
	<!--
	 *
	 * TABLE paper_search_object_keywords
	 *
	 -->
	<table name="paper_search_object_keywords">
		<field name="object_id" type="I8">
			<NOTNULL />
		</field>
		<field name="keyword_id" type="I8">
			<NOTNULL />
		</field>
		<field name="pos" type="I4">
			<NOTNULL />
			<descr>Word position of the keyword in the object.</descr>
		</field>
		<descr>Keyword occurrences for each indexed object.</descr>
		<index name="paper_search_object_keywords_keyword_id">
			<col>keyword_id</col>
		</index>
		<index name="paper_search_object_keywords_pkey">
			<col>object_id</col>
			<col>pos</col>
			<UNIQUE />
		</index>
	</table>
	
	
	<!-- OAI Tables -->
	
	<!--
	 *
	 * TABLE oai_resumption_tokens
	 *
	 -->
	<table name="oai_resumption_tokens">
		<field name="token" type="C2" size="32">
			<NOTNULL />
		</field>
		<field name="expire" type="I8">
			<NOTNULL/>
		</field>
		<field name="record_offset" type="I4">
			<NOTNULL/>
		</field>
		<field name="params" type="X" />
		<descr>Resumption tokens for the OAI protocol interface.</descr>
		<index name="oai_resumption_tokens_pkey">
			<col>token</col>
			<UNIQUE/>
		</index>
	</table>
	
	
	<!-- Reading Tools Tables -->
	
	<!--
	 *
	 * TABLE rt_versions
	 *
	 -->
	<table name="rt_versions">
		<field name="version_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="conference_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="version_key" type="C2" size="40">
			<NOTNULL/>
		</field>
		<field name="locale" type="C2" size="5">
			<DEFAULT VALUE="en_US"/>
		</field>
		<field name="title" type="C2" size="120">
			<NOTNULL/>
		</field>
		<field name="description" type="X"/>
		<descr>Reading Tools versions.</descr>
		<index name="rt_versions_conference_id">
			<col>conference_id</col>
		</index>
		<index name="rt_versions_version_key">
			<col>version_key</col>
		</index>
	</table>
	
	<!--
	 *
	 * TABLE rt_contexts
	 *
	 -->
	<table name="rt_contexts">
		<field name="context_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="version_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="title" type="C2" size="120">
			<NOTNULL/>
		</field>
		<field name="abbrev" type="C2" size="32">
			<NOTNULL/>
		</field>
		<field name="description" type="X"/>
		<field name="cited_by" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="author_terms" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="define_terms" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="geo_terms" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<descr>Reading Tools contexts (within versions).</descr>
		<index name="rt_contexts_version_id">
			<col>version_id</col>
		</index>
	</table>
	
	<!--
	 *
	 * TABLE rt_searches
	 *
	 -->
	<table name="rt_searches">
		<field name="search_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="context_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="title" type="C2" size="120">
			<NOTNULL/>
		</field>
		<field name="description" type="X"/>
		<field name="url" type="X"/>
		<field name="search_url" type="X"/>
		<field name="search_post" type="X"/>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<descr>Reading Tools searches (within contexts).</descr>
		<index name="rt_searches_context_id">
			<col>context_id</col>
		</index>
	</table>

	<!--
	 *
	 * TABLE registration_types 
	 *
	 -->
	<table name="registration_types">
		<field name="type_id" type="I8">
			<KEY />
			<AUTOINCREMENT />
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="code" type="C2" size="80" />
		<field name="cost" type="F" />
		<field name="currency_code_alpha" type="C2" size="3">
			<NOTNULL/>
		</field>
		<field name="opening_date" type="D"/>
		<field name="closing_date" type="T">
			<NOTNULL/>
		</field>
		<field name="expiry_date" type="T" />
		<field name="access" type="I2">
			<NOTNULL/>
		</field>
		<field name="institutional" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="membership" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="pub" type="I1">
			<NOTNULL/>
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
		</field>
		<descr>Registration types.</descr>
	</table>

	<!--
	  *
	  * TABLE registration_type_settings
	  *
	  -->
	<table name="registration_type_settings">
		<field name="type_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Locale-specific registration type data</descr>
		<index name="registration_type_settings_type_id">
			<col>type_id</col>
		</index>
		<index name="registration_type_settings_pkey">
			<col>type_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE/>
		</index>
	</table>
	
	<!--
	*
	* TABLE registration_options
	*
	-->
	<table name="registration_options">
		<field name="option_id" type="I8">
			<KEY />
			<AUTOINCREMENT />
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="code" type="C2" size="80" />
		<field name="opening_date" type="D"/>
		<field name="closing_date" type="T">
			<NOTNULL/>
		</field>
		<field name="pub" type="I1">
			<NOTNULL/>
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
		</field>
		<descr>Registration options.</descr>
	</table>

	<!--
	  *
	  * TABLE registration_option_settings
	  *
	  -->
	<table name="registration_option_settings">
		<field name="option_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Locale-specific registration option data</descr>
		<index name="registration_option_settings_type_id">
			<col>option_id</col>
		</index>
		<index name="registration_option_settings_pkey">
			<col>option_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE/>
		</index>
	</table>

	<!--
	 *
	 * TABLE registration_option_costs
	 *
	 -->
	<table name="registration_option_costs">
		<field name="type_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="option_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="cost" type="F">
			<NOTNULL/>
		</field>
		<descr>Pricing for registratin options for each registration type</descr>
		<index name="registration_option_costs_pkey">
			<col>type_id</col>
			<col>option_id</col>
			<UNIQUE/>
		</index>
	</table>

	<!--
	 *
	 * TABLE registration_option_assoc
	 *
	 -->
	<table name="registration_option_assoc">
		<field name="option_id" type="I8">
			<NOTNULL />
		</field>
		<field name="registration_id" type="I8">
			<NOTNULL/>
		</field>
		<descr>Registration options.</descr>
		<index name="registration_option_assoc_pkey">
			<col>option_id</col>
			<col>registration_id</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE registrations
	  *
	 -->
	<table name="registrations">
		<field name="registration_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="user_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="type_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="date_registered" type="D">
			<NOTNULL/>
		</field>
		<field name="date_paid" type="D"/>
		<field name="membership" type="C2" size="40"/>
		<field name="domain" type="C2" size="255"/>
		<field name="ip_range" type="X"/>
		<field name="special_requests" type="X"/>
		<descr>Conference registrations.</descr>
		<index name="registration_sched_conf_id">
			<col>sched_conf_id</col>
			<col>user_id</col>
			<UNIQUE/>
		</index>
		<index name="registration_domain">
			<col>domain</col>
		</index>
	</table>

	<!--
	 *
	 * TABLE announcement_types 
	 *
	 -->
	<table name="announcement_types">
		<field name="type_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="conference_id" type="I8">
			<NOTNULL/>
		</field>
		<descr>Conference announcement types.</descr>
		<index name="announcement_types_conference_id">
			<col>conference_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE announcement_type_settings
	  *
	  -->
	<table name="announcement_type_settings">
		<field name="type_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Locale-specific announcement type data</descr>
		<index name="announcement_type_settings_type_id">
			<col>type_id</col>
		</index>
		<index name="announcement_type_settings_pkey">
			<col>type_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE/>
		</index>
	</table>

	<!--
	  *
	  * TABLE announcements 
	  *
	  -->
	<table name="announcements">
		<field name="announcement_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="conference_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="type_id" type="I8"/>
		<field name="date_expire" type="T"/>
		<field name="date_posted" type="T">
			<NOTNULL/>
		</field>
		<descr>Conference announcements.</descr>
		<index name="announcements_conference_id">
			<col>conference_id</col>
		</index>
		<index name="announcements_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE announcement_settings
	  *
	  -->
	<table name="announcement_settings">
		<field name="announcement_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Locale-specific announcement data</descr>
		<index name="announcement_settings_announcement_id">
			<col>announcement_id</col>
		</index>
		<index name="announcement_settings_pkey">
			<col>announcement_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE />
		</index>
	</table>

	<!--
	  *
	  * TABLE captchas
	  *
	  -->
	<table name="captchas">
		<field name="captcha_id" type="I8">
			<KEY />
			<AUTOINCREMENT />
		</field>
		<field name="session_id" type="C2" size="32">
			<NOTNULL/>
		</field>
		<field name="value" type="C2" size="20">
			<NOTNULL/>
		</field>
		<field name="date_created" type="T">
			<NOTNULL/>
		</field>
	</table>

	<!--
	  *
	  * TABLE temporary_files
	  *
	  -->
	<table name="temporary_files">
		<field name="file_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="user_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="file_name" type="C2" size="90">
			<NOTNULL/>
		</field>
		<field name="file_type" type="C2" size="255">
		</field>
		<field name="file_size" type="I8">
			<NOTNULL/>
		</field>
		<field name="original_file_name" type="C2" size="90"/>
		<field name="date_uploaded" type="T">
			<NOTNULL/>
		</field>
		<descr>Temporary file storage; used to keep attachments across multiple email composition requests</descr>
		<index name="temporary_files_user_id">
			<col>user_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE access_keys
	  *
	  -->
	<table name="access_keys">
		<field name="access_key_id" type="I8">
			<KEY />
			<AUTOINCREMENT />
		</field>
		<field name="context" type="C2" size="40">
			<NOTNULL/>
		</field>
		<field name="key_hash" type="C2" size="40">
			<NOTNULL/>
		</field>
		<field name="user_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="assoc_id" type="I8"/>
		<field name="expiry_date" type="T">
			<NOTNULL/>
		</field>
		<descr>Access keys are used to provide pseudo-login functionality for security-minimal tasks. Passkeys can be emailed directly to users, who can use them for a limited time in lieu of standard username and password.</descr>
		<index name="access_keys_hash">
			<col>key_hash</col>
			<col>user_id</col>
			<col>context</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE queued_payments
	  *
	  -->
	<table name="queued_payments">
		<field name="queued_payment_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="date_created" type="T">
			<NOTNULL/>
		</field>
		<field name="date_modified" type="T">
			<NOTNULL/>
		</field>
		<field name="expiry_date" type="D" />
		<field name="payment_data" type="X" />
		<descr>Logs queued (unfulfilled) payments.</descr>
	</table>

	<!-- 
	  *
	  * TABLE groups
	  *
	  -->
	<table name="groups">
		<field name="group_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="conference_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="about_displayed" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<index name="groups_conference_id">
			<col>conference_id</col>
		</index>
		<index name="groups_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE group_settings
	  *
	  -->
	<table name="group_settings">
		<field name="group_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Locale-specific group data</descr>
		<index name="group_settings_announcement_id">
			<col>group_id</col>
		</index>
		<index name="group_settings_pkey">
			<col>group_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE />
		</index>
	</table>

	<!-- 
	  *
	  * TABLE group_memberships
	  *
	 -->
	<table name="group_memberships">
		<field name="user_id" type="I8">
			<NOTNULL />
		</field>
		<field name="group_id" type="I8">
			<NOTNULL />
		</field>
		<field name="about_displayed" type="I1">
			<NOTNULL/>
			<DEFAULT VALUE="1"/>
		</field>
		<field name="seq" type="F">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<index name="group_memberships_pkey">
			<col>user_id</col>
			<col>group_id</col>
			<UNIQUE/>
		</index>
	</table>

	<!--
	  *
	  * TABLE buildings
	  *
	  -->
	<table name="buildings">
		<field name="building_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<descr>Conference scheduler buildings.</descr>
		<index name="building_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE building_settings
	  *
	  -->
	<table name="building_settings">
		<field name="building_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Locale-specific building data</descr>
		<index name="building_settings_building_id">
			<col>building_id</col>
		</index>
		<index name="building_settings_pkey">
			<col>building_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE/>
		</index>
	</table>

	<!--
	  *
	  * TABLE rooms
	  *
	  -->
	<table name="rooms">
		<field name="room_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="building_id" type="I8">
			<NOTNULL/>
		</field>
		<descr>Conference scheduler rooms.</descr>
		<index name="room_building_id">
			<col>building_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE room_settings
	  *
	  -->
	<table name="room_settings">
		<field name="room_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Locale-specific room data</descr>
		<index name="room_settings_room_id">
			<col>room_id</col>
		</index>
		<index name="room_settings_pkey">
			<col>room_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE/>
		</index>
	</table>

	<!--
	  *
	  * TABLE special_events
	  *
	  -->
	<table name="special_events">
		<field name="special_event_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="sched_conf_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="start_time" type="T"/>
		<field name="end_time" type="T"/>
		<field name="room_id" type="I8" />
		<descr>Conference scheduler special events.</descr>
		<index name="special_event_sched_conf_id">
			<col>sched_conf_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE special_event_settings
	  *
	  -->
	<table name="special_event_settings">
		<field name="special_event_id" type="I8">
			<NOTNULL />
		</field>
		<field name="locale" type="C2" size="5">
			<NOTNULL />
			<DEFAULT VALUE=""/>
		</field>
		<field name="setting_name" type="C2" size="255">
			<NOTNULL />
		</field>
		<field name="setting_value" type="X"/>
		<field name="setting_type" type="C2" size="6">
			<NOTNULL/>
		</field>
		<descr>Locale-specific special event data</descr>
		<index name="special_event_settings_special_event_id">
			<col>special_event_id</col>
		</index>
		<index name="special_event_settings_pkey">
			<col>special_event_id</col>
			<col>locale</col>
			<col>setting_name</col>
			<UNIQUE/>
		</index>
	</table>
</schema>
